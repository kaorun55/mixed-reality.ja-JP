---
title: 座標系
description: 固定された、継続的な、大規模で、ワールドスケールの混合現実体験を構築するために使用される空間座標系。
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
keywords: 座標系、空間座標システム、方向専用、取り付けられているスケール、拡大/縮小、室内スケール、ワールドスケール、360度、取り付けられた、室内、部屋、ワールド、スケール、位置、向き、固定、取り付け、ステージ、アンカー、空間アンカー、ワールドロック、ワールドロック、本体ロック、ボディロック、境界、永続化、共有、追跡損失、クラウド空間アンカー
ms.openlocfilehash: 228f46f1962c39012571234da47ccec07aa67118
ms.sourcegitcommit: 6bc6757b9b273a63f260f1716c944603dfa51151
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/01/2019
ms.locfileid: "73436146"
---
# <a name="coordinate-systems"></a><span data-ttu-id="dc6b5-104">座標系</span><span class="sxs-lookup"><span data-stu-id="dc6b5-104">Coordinate systems</span></span>

<span data-ttu-id="dc6b5-105">基本的には、mixed reality アプリは、実際のオブジェクトのように見えるように、世界中に[ホログラム](hologram.md)を配置します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-105">At their core, mixed reality apps place [holograms](hologram.md) in your world that look and sound like real objects.</span></span> <span data-ttu-id="dc6b5-106">これには、ユーザーにとって意味のある、世界中の場所でそれらのホログラムを正確に配置し、回転させる必要があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-106">This involves precisely positioning and orienting those holograms at places in the world that are meaningful to the user, whether the world is their physical room or a virtual realm you've created.</span></span> <span data-ttu-id="dc6b5-107">ホログラムの位置と向き、または、[宝石](gaze-and-commit.md)や[手](hands-and-tools.md)の位置などのその他のジオメトリについての決定については、Windows には、ジオメトリを表現できるさまざまな現実世界の座標系が用意されて**います。空間座標系**。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-107">When reasoning about the position and orientation of your holograms, or any other geometry such as the [gaze](gaze-and-commit.md) ray or [hand positions](hands-and-tools.md), Windows provides various real-world coordinate systems in which that geometry can be expressed, known as **spatial coordinate systems**.</span></span>

<br>

<iframe width="940" height="530" src="https://www.youtube.com/embed/TneGSeqVAXQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## <a name="device-support"></a><span data-ttu-id="dc6b5-108">デバイスのサポート</span><span class="sxs-lookup"><span data-stu-id="dc6b5-108">Device support</span></span>

<table>
    <colgroup>
    <col width="40%" />
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
    </colgroup>
    <tr>
        <td><span data-ttu-id="dc6b5-109"><strong>機能</strong></span><span class="sxs-lookup"><span data-stu-id="dc6b5-109"><strong>Feature</strong></span></span></td>
        <td><span data-ttu-id="dc6b5-110"><a href="hololens-hardware-details.md"><strong>HoloLens (第 1 世代)</strong></a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-110"><a href="hololens-hardware-details.md"><strong>HoloLens (1st gen)</strong></a></span></span></td>
        <td><span data-ttu-id="dc6b5-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span><span class="sxs-lookup"><span data-stu-id="dc6b5-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span></span></td>
        <td><span data-ttu-id="dc6b5-112"><a href="immersive-headset-hardware-details.md"><strong>イマーシブ ヘッドセット</strong></a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-112"><a href="immersive-headset-hardware-details.md"><strong>Immersive headsets</strong></a></span></span></td>
    </tr>
     <tr>
        <td><span data-ttu-id="dc6b5-113"><a href="coordinate-systems.md#stationary-frame-of-reference">静止フレーム (参照)</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-113"><a href="coordinate-systems.md#stationary-frame-of-reference">Stationary frame of reference</a></span></span></td>
        <td><span data-ttu-id="dc6b5-114">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-114">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-115">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-115">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-116">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-116">✔️</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="dc6b5-117"><a href="coordinate-systems.md#attached-frame-of-reference">アタッチされた参照のフレーム</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-117"><a href="coordinate-systems.md#attached-frame-of-reference">Attached frame of reference</a></span></span></td>
        <td><span data-ttu-id="dc6b5-118">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-118">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-119">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-119">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-120">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-120">✔️</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="dc6b5-121"><a href="coordinate-systems.md#stage-frame-of-reference">参照のステージフレーム</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-121"><a href="coordinate-systems.md#stage-frame-of-reference">Stage frame of reference</a></span></span></td>
        <td><span data-ttu-id="dc6b5-122">まだサポートされていません</span><span class="sxs-lookup"><span data-stu-id="dc6b5-122">Not supported yet</span></span></td>
        <td><span data-ttu-id="dc6b5-123">まだサポートされていません</span><span class="sxs-lookup"><span data-stu-id="dc6b5-123">Not supported yet</span></span></td>
        <td><span data-ttu-id="dc6b5-124">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-124">✔️</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="dc6b5-125"><a href="coordinate-systems.md#spatial-anchors">空間アンカー</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-125"><a href="coordinate-systems.md#spatial-anchors">Spatial anchors</a></span></span></td>
        <td><span data-ttu-id="dc6b5-126">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-126">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-127">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-127">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-128">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-128">✔️</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="dc6b5-129"><a href="spatial-mapping.md">空間マッピング</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-129"><a href="spatial-mapping.md">Spatial mapping</a></span></span></td>
        <td><span data-ttu-id="dc6b5-130">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-130">✔️</span></span></td>
        <td><span data-ttu-id="dc6b5-131">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-131">✔️</span></span></td>
        <td>❌</td>
    </tr>
    <tr>
        <td><span data-ttu-id="dc6b5-132"><a href="scene-understanding.md">シーンの理解</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-132"><a href="scene-understanding.md">Scene understanding</a></span></span></td>
        <td>❌</td>
        <td><span data-ttu-id="dc6b5-133">✔️</span><span class="sxs-lookup"><span data-stu-id="dc6b5-133">✔️</span></span></td>
        <td>❌</td>
    </tr>
</table>

## <a name="mixed-reality-experience-scales"></a><span data-ttu-id="dc6b5-134">Mixed reality エクスペリエンススケール</span><span class="sxs-lookup"><span data-stu-id="dc6b5-134">Mixed reality experience scales</span></span>

<span data-ttu-id="dc6b5-135">Mixed reality アプリは、ヘッドセットの向きだけを必要とする360度のビデオビューアーから、空間マッピングと空間アンカーを必要とする完全な世界規模のアプリとゲームまで、さまざまなユーザーエクスペリエンスを設計できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-135">Mixed reality apps can design for a broad range of user experiences, from 360-degree video viewers that just need the headset's orientation, to full world-scale apps and games, which need spatial mapping and spatial anchors:</span></span>
<br>

| <span data-ttu-id="dc6b5-136">エクスペリエンススケール</span><span class="sxs-lookup"><span data-stu-id="dc6b5-136">Experience scale</span></span> | <span data-ttu-id="dc6b5-137">要件</span><span class="sxs-lookup"><span data-stu-id="dc6b5-137">Requirements</span></span> | <span data-ttu-id="dc6b5-138">エクスペリエンスの例</span><span class="sxs-lookup"><span data-stu-id="dc6b5-138">Example experience</span></span> | 
|----------|----------|----------|
|  <span data-ttu-id="dc6b5-139">**方向のみ**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-139">**Orientation-only**</span></span> |  <span data-ttu-id="dc6b5-140">**ヘッドセットの向き**(重力固定)</span><span class="sxs-lookup"><span data-stu-id="dc6b5-140">**Headset orientation** (gravity-aligned)</span></span> |  <span data-ttu-id="dc6b5-141">360°ビデオビューアー</span><span class="sxs-lookup"><span data-stu-id="dc6b5-141">360° video viewer</span></span> | 
|  <span data-ttu-id="dc6b5-142">**固定-スケール**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-142">**Seated-scale**</span></span> |  <span data-ttu-id="dc6b5-143">上、0位置に対する**ヘッドセット位置**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-143">Above, plus **headset position** relative to zero position</span></span> |  <span data-ttu-id="dc6b5-144">レースゲームまたは宇宙シミュレーター</span><span class="sxs-lookup"><span data-stu-id="dc6b5-144">Racing game or space simulator</span></span> | 
|  <span data-ttu-id="dc6b5-145">**継続的なスケール**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-145">**Standing-scale**</span></span> |  <span data-ttu-id="dc6b5-146">上、さらに**ステージフロアの原点**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-146">Above, plus **stage floor origin**</span></span> |  <span data-ttu-id="dc6b5-147">アヒルと覆い焼きを行うアクションゲーム</span><span class="sxs-lookup"><span data-stu-id="dc6b5-147">Action game where you duck and dodge in place</span></span>  | 
|  <span data-ttu-id="dc6b5-148">**部屋-スケール**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-148">**Room-scale**</span></span> |  <span data-ttu-id="dc6b5-149">上、さらに**ステージの境界多角形**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-149">Above, plus **stage bounds polygon**</span></span> |  <span data-ttu-id="dc6b5-150">パズルゲームでパズルを見てみましょう</span><span class="sxs-lookup"><span data-stu-id="dc6b5-150">Puzzle game where you walk around the puzzle</span></span> | 
|  <span data-ttu-id="dc6b5-151">**世界規模**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-151">**World-scale**</span></span> |  <span data-ttu-id="dc6b5-152">**空間アンカー** (および通常は[空間マッピング](spatial-mapping.md))</span><span class="sxs-lookup"><span data-stu-id="dc6b5-152">**Spatial anchors** (and typically [spatial mapping](spatial-mapping.md))</span></span> |  <span data-ttu-id="dc6b5-153">[RoboRaid](https://www.microsoft.com/p/roboraid/9nblggh5fv3j)などの実際の壁から来た敵のゲーム</span><span class="sxs-lookup"><span data-stu-id="dc6b5-153">Game with enemies coming from your real walls, such as [RoboRaid](https://www.microsoft.com/p/roboraid/9nblggh5fv3j)</span></span> | 

<span data-ttu-id="dc6b5-154">これらのエクスペリエンススケールは、"入れ子の人形" モデルに従います。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-154">These experience scales follow a "nesting dolls" model.</span></span> <span data-ttu-id="dc6b5-155">Windows Mixed Reality の主な設計原則は、特定のヘッドセットで、ターゲットエクスペリエンススケール用に構築されたアプリと、それ以外のすべてのスケールをサポートすることです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-155">The key design principle here for Windows Mixed Reality is that a given headset supports apps built for a target experience scale, as well as all lesser scales:</span></span>
<br>

| <span data-ttu-id="dc6b5-156">6自由度追跡</span><span class="sxs-lookup"><span data-stu-id="dc6b5-156">6DOF tracking</span></span> | <span data-ttu-id="dc6b5-157">定義されたフロア</span><span class="sxs-lookup"><span data-stu-id="dc6b5-157">Floor defined</span></span> | <span data-ttu-id="dc6b5-158">360°の追跡</span><span class="sxs-lookup"><span data-stu-id="dc6b5-158">360° tracking</span></span> | <span data-ttu-id="dc6b5-159">定義された境界</span><span class="sxs-lookup"><span data-stu-id="dc6b5-159">Bounds defined</span></span> | <span data-ttu-id="dc6b5-160">空間アンカー</span><span class="sxs-lookup"><span data-stu-id="dc6b5-160">Spatial anchors</span></span> | <span data-ttu-id="dc6b5-161">最大エクスペリエンス</span><span class="sxs-lookup"><span data-stu-id="dc6b5-161">Max experience</span></span> | 
|----------|----------|----------|----------|----------|----------|
|  <span data-ttu-id="dc6b5-162">必須ではない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-162">No</span></span> |  - |  - |  - |  - |  <span data-ttu-id="dc6b5-163">**方向のみ**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-163">**Orientation-only**</span></span> | 
|  <span data-ttu-id="dc6b5-164">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-164">**Yes**</span></span> |  <span data-ttu-id="dc6b5-165">必須ではない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-165">No</span></span> |  - |  - |  - |  <span data-ttu-id="dc6b5-166">**固定**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-166">**Seated**</span></span> | 
|  <span data-ttu-id="dc6b5-167">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-167">**Yes**</span></span> |  <span data-ttu-id="dc6b5-168">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-168">**Yes**</span></span> |  <span data-ttu-id="dc6b5-169">必須ではない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-169">No</span></span> |  - |  - |  <span data-ttu-id="dc6b5-170">**今後**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-170">**Standing - Forward**</span></span> | 
|  <span data-ttu-id="dc6b5-171">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-171">**Yes**</span></span> |  <span data-ttu-id="dc6b5-172">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-172">**Yes**</span></span> |  <span data-ttu-id="dc6b5-173">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-173">**Yes**</span></span> |  <span data-ttu-id="dc6b5-174">必須ではない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-174">No</span></span> |  - |  <span data-ttu-id="dc6b5-175">**360°**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-175">**Standing - 360°**</span></span> | 
|  <span data-ttu-id="dc6b5-176">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-176">**Yes**</span></span> |  <span data-ttu-id="dc6b5-177">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-177">**Yes**</span></span> |  <span data-ttu-id="dc6b5-178">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-178">**Yes**</span></span> |  <span data-ttu-id="dc6b5-179">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-179">**Yes**</span></span> |  <span data-ttu-id="dc6b5-180">必須ではない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-180">No</span></span> |  <span data-ttu-id="dc6b5-181">**将来**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-181">**Room**</span></span> | 
|  <span data-ttu-id="dc6b5-182">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-182">**Yes**</span></span> |  <span data-ttu-id="dc6b5-183">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-183">**Yes**</span></span> |  <span data-ttu-id="dc6b5-184">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-184">**Yes**</span></span> |  <span data-ttu-id="dc6b5-185">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-185">**Yes**</span></span> |  <span data-ttu-id="dc6b5-186">**はい**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-186">**Yes**</span></span> |  <span data-ttu-id="dc6b5-187">**現実的**</span><span class="sxs-lookup"><span data-stu-id="dc6b5-187">**World**</span></span> | 

<span data-ttu-id="dc6b5-188">参照のステージフレームは、HoloLens ではまだサポートされていないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-188">Note that the Stage frame of reference is not yet supported on HoloLens.</span></span> <span data-ttu-id="dc6b5-189">現在、HoloLens の部屋規模のアプリでは、[空間マッピング](spatial-mapping.md)または[シーンの理解](scene-understanding.md)を使用して、ユーザーのフロアと壁面を見つける必要があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-189">A room-scale app on HoloLens currently needs to use [spatial mapping](spatial-mapping.md) or [scene understanding](scene-understanding.md) to find the user's floor and walls.</span></span>

## <a name="spatial-coordinate-systems"></a><span data-ttu-id="dc6b5-190">空間座標系</span><span class="sxs-lookup"><span data-stu-id="dc6b5-190">Spatial coordinate systems</span></span>

<span data-ttu-id="dc6b5-191">すべての3D グラフィックスアプリケーションは、[デカルト座標系](https://docs.microsoft.com/windows/uwp/graphics-concepts/coordinate-systems)を使用して、レンダリングされる仮想ワールド内のオブジェクトの位置と方向を理解します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-191">All 3D graphics applications use [Cartesian coordinate systems](https://docs.microsoft.com/windows/uwp/graphics-concepts/coordinate-systems) to reason about the positions and orientations of objects in the virtual worlds they render.</span></span> <span data-ttu-id="dc6b5-192">このような座標系では、オブジェクトの位置を表す3つの垂直軸 (X、Y、Z 軸) が確立されます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-192">Such coordinate systems establish 3 perpendicular axes along which to position objects: an X, Y, and Z axis.</span></span>

<span data-ttu-id="dc6b5-193">[混合現実](mixed-reality.md)では、アプリは、仮想と物理の両方の座標系を理由としています。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-193">In [mixed reality](mixed-reality.md), your apps will reason about both virtual and physical coordinate systems.</span></span> <span data-ttu-id="dc6b5-194">Windows は、物理的な世界で**空間座標系**の真の意味を持つ座標系を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-194">Windows calls a coordinate system that has real meaning in the physical world a **spatial coordinate system**.</span></span>

<span data-ttu-id="dc6b5-195">空間座標系は、座標の値をメートル単位で表します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-195">Spatial coordinate systems express their coordinate values in meters.</span></span> <span data-ttu-id="dc6b5-196">つまり、X 軸、Y 軸、または Z 軸で2つの単位を離れた位置に配置されたオブジェクトは、混合現実でレンダリングされると、互いに2メートル離れて表示されます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-196">This means that objects placed 2 units apart in either the X, Y or Z axis will appear 2 meters apart from one another when rendered in mixed reality.</span></span> <span data-ttu-id="dc6b5-197">これにより、実際のスケールでオブジェクトと環境を簡単にレンダリングできます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-197">This lets you easily render objects and environments at real-world scale.</span></span>

<span data-ttu-id="dc6b5-198">一般に、デカルト座標系は、右ききまたは左ききにすることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-198">In general, Cartesian coordinate systems can be either right-handed or left-handed.</span></span> <span data-ttu-id="dc6b5-199">Windows 上の空間座標系は常に右辺になります。つまり、正の X 軸が右に、正の Y 軸が上に向かって (重力に沿って)、正の Z 軸がポイントすることを意味します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-199">Spatial coordinate systems on Windows are always right-handed, which means that the positive X-axis points right, the positive Y-axis points up (aligned to gravity) and the positive Z-axis points towards you.</span></span>

<span data-ttu-id="dc6b5-200">どちらの種類の座標系でも、正の X 軸は右を指し、正の Y 軸は上をポイントします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-200">In both kinds of coordinate systems, the positive X-axis points to the right and the positive Y-axis points up.</span></span> <span data-ttu-id="dc6b5-201">違いは、正の Z 軸が手前に表示されるか、または離れているかです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-201">The difference is whether the positive Z-axis points towards or away from you.</span></span> <span data-ttu-id="dc6b5-202">正の X 方向の左側または右側の指をポイントし、正の Y 方向に curling することによって、正の Z 軸の方向を思い出すことができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-202">You can remember which direction the positive Z-axis points by pointing the fingers of either your left or right hand in the positive X direction and curling them to the positive Y direction.</span></span> <span data-ttu-id="dc6b5-203">Thumb が指す方向は、その座標系に対して、正の Z 軸が指す方向になります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-203">The direction your thumb points, either toward or away from you, is the direction that the positive Z-axis points for that coordinate system.</span></span>

## <a name="building-an-orientation-only-or-seated-scale-experience"></a><span data-ttu-id="dc6b5-204">向きのみまたは取り付けられたスケールエクスペリエンスの構築</span><span class="sxs-lookup"><span data-stu-id="dc6b5-204">Building an orientation-only or seated-scale experience</span></span>

<span data-ttu-id="dc6b5-205">Holographic[レンダリング](rendering.md)の鍵となるのは、ユーザーが移動するたびに、各フレームのホログラムのアプリのビューを変更することです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-205">The key to holographic [rendering](rendering.md) is changing your app's view of its holograms each frame as the user moves around, to match their predicted head motion.</span></span> <span data-ttu-id="dc6b5-206">固定された**スケールのエクスペリエンス**を構築できます。これは、**参照の静止フレーム**を使用して、ユーザーのヘッド位置とヘッドの向きに対する変更を反映します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-206">You can build **seated-scale experiences** that respect changes to the user's head position and head orientation using a **stationary frame of reference**.</span></span>

<span data-ttu-id="dc6b5-207">一部のコンテンツでは、ヘッド位置の更新を無視して、選択した見出しとユーザーからの距離を常に固定したままにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-207">Some content must ignore head position updates, staying fixed at a chosen heading and distance from the user at all times.</span></span> <span data-ttu-id="dc6b5-208">主な例は、360度のビデオです。ビデオは1つの固定されたパースペクティブからキャプチャされるため、ユーザーが見ているようにビューの向きを変更する必要がある場合でも、ビューの位置がコンテンツに対して相対的に移動するようになります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-208">The primary example is 360-degree video: because the video is captured from a single fixed perspective, it would ruin the illusion for the view position to move relative to the content, even though the view orientation must change as the user looks around.</span></span> <span data-ttu-id="dc6b5-209">このような**向き専用のエクスペリエンス**は、**関連付けられている参照のフレーム**を使用して構築できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-209">You can build such **orientation-only experiences** using an **attached frame of reference**.</span></span>

### <a name="stationary-frame-of-reference"></a><span data-ttu-id="dc6b5-210">静止フレーム (参照)</span><span class="sxs-lookup"><span data-stu-id="dc6b5-210">Stationary frame of reference</span></span>

<span data-ttu-id="dc6b5-211">静止した参照フレームによって提供される座標系は、ユーザーの位置の変更を考慮しながら、ユーザーの近くにあるオブジェクトの位置を可能な限り安定した状態に保つために機能します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-211">The coordinate system provided by a stationary frame of reference works to keep the positions of objects near the user as stable as possible relative to the world, while respecting changes in the user's head position.</span></span>

<span data-ttu-id="dc6b5-212">[Unity](https://unity3d.com/)などのゲームエンジンでの動作が固定されている場合、そのエンジンの "世界の出発点" を定義するのが静止した参照フレームです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-212">For seated-scale experiences in a game engine such as [Unity](https://unity3d.com/), a stationary frame of reference is what defines the engine's "world origin."</span></span> <span data-ttu-id="dc6b5-213">特定のワールド座標に配置されたオブジェクトは、その同じ座標を使用して、実際の環境内での位置を定義するために、参照の静止フレームを使用します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-213">Objects that are placed at a specific world coordinate use the stationary frame of reference to define their position in the real-world using those same coordinates.</span></span> <span data-ttu-id="dc6b5-214">ユーザーの手順に関係なく、世界中のコンテンツは、世界中に**ロック**されたコンテンツとして知られています。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-214">Content that stays put in the world, even as the user walks around, is known as **world-locked** content.</span></span>

<span data-ttu-id="dc6b5-215">通常、アプリは起動時に1つの静止フレームを作成し、アプリの有効期間全体にわたってその座標系を使用します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-215">An app will typically create one stationary frame of reference on startup and use its coordinate system throughout the app's lifetime.</span></span> <span data-ttu-id="dc6b5-216">Unity のアプリ開発者として、コンテンツを元の場所に対して相対的に配置できます。これは、ユーザーの最初の位置と向きになります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-216">As an app developer in Unity, you can just start placing content relative to the origin, which will be at the user's initial head position and orientation.</span></span> <span data-ttu-id="dc6b5-217">ユーザーが新しい場所に移動したときに、配置されたスケールエクスペリエンスを継続する必要がある場合は、その場所にある世界 recenter をすることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-217">If the user moves to a new place and wants to continue their seated-scale experience, you can recenter the world origin at that location.</span></span>

<span data-ttu-id="dc6b5-218">時間の経過と共に、システムがユーザーの環境についてさらに詳しく学習すると、現実世界のさまざまな地点間の距離が、以前のシステムよりも短いか長いかが判断される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-218">Over time, as the system learns more about the user's environment, it may determine that distances between various points in the real-world are shorter or longer than the system previously believed.</span></span> <span data-ttu-id="dc6b5-219">ユーザーが5メートル幅の範囲を超えている場合に、HoloLens のアプリに対する参照の静止フレームでホログラムをレンダリングすると、アプリはそれらのホログラムの観測された場所で誤差を観察することがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-219">If you render holograms in a stationary frame of reference for an app on HoloLens where users wander beyond an area about 5 meters wide, your app may observe drift in the observed location of those holograms.</span></span> <span data-ttu-id="dc6b5-220">ユーザーが 5 m を超える公を経験している場合、[世界規模のエクスペリエンス](#building-a-world-scale-experience)を構築しています。そのためには、次に示すように、ホログラムを安定させるために追加の手法が必要になります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-220">If your experience has users wandering beyond 5 meters, you're building a [world-scale experience](#building-a-world-scale-experience), which will require additional techniques to keep holograms stable, as described below.</span></span>

### <a name="attached-frame-of-reference"></a><span data-ttu-id="dc6b5-221">アタッチされた参照のフレーム</span><span class="sxs-lookup"><span data-stu-id="dc6b5-221">Attached frame of reference</span></span>

<span data-ttu-id="dc6b5-222">アタッチされている参照のフレームはユーザーと共に移動します。固定の見出しは、アプリが最初にフレームを作成したときに定義されます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-222">An attached frame of reference moves with the user as they walk around, with a fixed heading defined when the app first creates the frame.</span></span> <span data-ttu-id="dc6b5-223">これにより、その参照フレーム内に配置されたコンテンツをユーザーが見やすいようになります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-223">This lets the user comfortably look around at content placed within that frame of reference.</span></span> <span data-ttu-id="dc6b5-224">このユーザーに対して相対的な方法でレンダリングされるコンテンツは **、本文ロック**されたコンテンツと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-224">Content rendered in this user-relative way is called **body-locked** content.</span></span>

<span data-ttu-id="dc6b5-225">ヘッドセットが世界中のどこにあるかを判断できない場合、関連付けられている参照のフレームは、ホログラムのレンダリングに使用できる座標系のみを提供します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-225">When the headset can't figure out where it is in the world, an attached frame of reference provides the only coordinate system which can be used to render holograms.</span></span> <span data-ttu-id="dc6b5-226">これにより、デバイスが世界中では検出できないことをユーザーに通知するフォールバック UI を表示するのに最適です。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-226">This makes it ideal for displaying fallback UI to tell the user that their device can't find them in the world.</span></span> <span data-ttu-id="dc6b5-227">拡大/縮小されたアプリには、ユーザーの再実行を支援する方向専用のフォールバックを含める必要があります。これは、 [Mixed Reality ホーム](navigating-the-windows-mixed-reality-home.md)に示されている UI と似ています。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-227">Apps that are seated-scale or higher should include an orientation-only fallback to help the user get going again, with UI similar to that shown in the [Mixed Reality home](navigating-the-windows-mixed-reality-home.md).</span></span>

## <a name="building-a-standing-scale-or-room-scale-experience"></a><span data-ttu-id="dc6b5-228">大規模または部屋規模のエクスペリエンスを構築する</span><span class="sxs-lookup"><span data-stu-id="dc6b5-228">Building a standing-scale or room-scale experience</span></span>

<span data-ttu-id="dc6b5-229">イマーシブヘッドセットでの拡大/縮小を実現し、継続的な**スケールエクスペリエンス**を構築するには、**参照のステージフレーム**を使用できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-229">To go beyond seated-scale on an immersive headset and build a **standing-scale experience**, you can use the **stage frame of reference**.</span></span>

<span data-ttu-id="dc6b5-230">**ルームスケールエクスペリエンス**を提供するために、事前に定義された5メートルの境界内にユーザーが移動できるようにするには、**ステージの境界**も確認します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-230">To provide a **room-scale experience**, letting users walk around within the 5-meter boundary they pre-defined, you can check for **stage bounds** as well.</span></span>

### <a name="stage-frame-of-reference"></a><span data-ttu-id="dc6b5-231">参照のステージフレーム</span><span class="sxs-lookup"><span data-stu-id="dc6b5-231">Stage frame of reference</span></span>

<span data-ttu-id="dc6b5-232">イマーシブヘッドセットを最初に設定すると、ユーザーは、混合現実を経験する部屋を表す**ステージ**を定義します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-232">When first setting up an immersive headset, the user defines a **stage**, which represents the room in which they will experience mixed reality.</span></span> <span data-ttu-id="dc6b5-233">ステージでは、**ステージの原点**を最小に定義します。これは、ユーザーの選択したフロア位置と、デバイスを使用することを目的とした前方向きを中心とした空間座標システムです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-233">The stage minimally defines a **stage origin**, a spatial coordinate system centered at the user's chosen floor position and forward orientation where they intend to use the device.</span></span> <span data-ttu-id="dc6b5-234">このステージ座標系にコンテンツを Y = 0 階平面に配置することにより、ユーザーがいても、ユーザーが継続的に**スケールできるエクスペリエンス**を提供するようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-234">By placing content in this stage coordinate system at the Y=0 floor plane, you can ensure your holograms appear comfortably on the floor when the user is standing, providing users with a **standing-scale experience**.</span></span>

### <a name="stage-bounds"></a><span data-ttu-id="dc6b5-235">ステージの境界</span><span class="sxs-lookup"><span data-stu-id="dc6b5-235">Stage bounds</span></span>

<span data-ttu-id="dc6b5-236">また、必要に応じて、混合現実で移動する家具をクリアした部屋内の領域である、**ステージの境界**を定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-236">The user may also optionally define **stage bounds**, an area within the room that they've cleared of furniture where they intend to move around in mixed reality.</span></span> <span data-ttu-id="dc6b5-237">その場合、アプリはこれらの境界を使用して**ルームスケールエクスペリエンス**を構築し、ユーザーがどこにでもホログラムを配置できるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-237">If so, the app can build a **room-scale experience**, using these bounds to ensure that holograms are always placed where the user can reach them.</span></span>

<span data-ttu-id="dc6b5-238">参照のステージフレームでは、フロア相対コンテンツを配置する1つの固定座標系が提供されるため、仮想現実のヘッドセット用に開発された、継続的なスケールのアプリケーションを移植するための最も簡単なパスです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-238">Because the stage frame of reference provides a single fixed coordinate system within which to place floor-relative content, it is the easiest path for porting standing-scale and room-scale applications developed for virtual reality headsets.</span></span> <span data-ttu-id="dc6b5-239">ただし、このような VR プラットフォームと同様に、1つの座標系では、システムの調整に応じて、中央から離れた位置にあるコンテンツが中心のコンテンツを変化させることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-239">However, as with those VR platforms, a single coordinate system can only stabilize content in about a 5 meter (16 foot) diameter, before lever-arm effects cause content far from the center to shift noticeably as the system adjusts.</span></span> <span data-ttu-id="dc6b5-240">5つのメーターを超えるようにするには、空間アンカーが必要です。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-240">To go beyond 5 meters, spatial anchors are needed.</span></span>

## <a name="building-a-world-scale-experience"></a><span data-ttu-id="dc6b5-241">世界規模でのエクスペリエンスの構築</span><span class="sxs-lookup"><span data-stu-id="dc6b5-241">Building a world-scale experience</span></span>

<span data-ttu-id="dc6b5-242">HoloLens を使用すると、ユーザーが5メートルを超える位置にある真の**ワールドスケールエクスペリエンス**を実現できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-242">HoloLens allows for true **world-scale experiences** that let users wander beyond 5 meters.</span></span> <span data-ttu-id="dc6b5-243">世界規模のアプリを構築するには、ルームスケールエクスペリエンスに使用されるもの以外の新しい手法が必要になります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-243">To build a world-scale app, you'll need new techniques beyond those used for room-scale experiences.</span></span>

### <a name="why-a-single-rigid-coordinate-system-cannot-be-used-beyond-5-meters"></a><span data-ttu-id="dc6b5-244">1つの固定座標系が 5 m を超えて使用できないのはなぜですか。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-244">Why a single rigid coordinate system cannot be used beyond 5 meters</span></span>

<span data-ttu-id="dc6b5-245">現在、ゲーム、データ可視化アプリ、または virtual reality アプリを作成する場合、一般的な方法は、他のすべての座標が確実にに戻すことができる絶対ワールド座標系を確立することです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-245">Today, when writing games, data visualization apps, or virtual reality apps, the typical approach is to establish one absolute world coordinate system that all other coordinates can reliably map back to.</span></span> <span data-ttu-id="dc6b5-246">その環境では、その世界の任意の2つのオブジェクト間の関係を定義する安定した変換をいつでも見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-246">In that environment, you can always find a stable transform that defines a relationship between any two objects in that world.</span></span> <span data-ttu-id="dc6b5-247">これらのオブジェクトを移動しなかった場合、それらの相対変換は常に同じままになります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-247">If you didn't move those objects, their relative transforms would always remain the same.</span></span> <span data-ttu-id="dc6b5-248">この種のグローバル座標系は、すべてのジオメトリが事前にわかっている純粋な仮想環境をレンダリングする場合に適しています。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-248">This kind of global coordinate system works well when rendering a purely virtual world where you know all of the geometry in advance.</span></span> <span data-ttu-id="dc6b5-249">現在、部屋規模の VR アプリケーションでは、通常、このような絶対部屋規模の座標系をフロア上の原点と共に確立します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-249">Room-scale VR apps today typically establish this kind of absolute room-scale coordinate system with its origin on the floor.</span></span>

<span data-ttu-id="dc6b5-250">これに対し、HoloLens などのならでは mixed reality デバイスは、世界に対して動的なセンサーによる認識を持ち、ビルの全フロアにわたってさまざまなメーターを調べるために、ユーザーの環境の時間にわたってその知識を継続的に調整します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-250">In contrast, an untethered mixed reality device such as HoloLens has a dynamic sensor-driven understanding of the world, continuously adjusting its knowledge over time of the user's surroundings as they walk many meters across an entire floor of a building.</span></span> <span data-ttu-id="dc6b5-251">世界規模の環境では、すべてのホログラムを1つの固定座標系に配置した場合、それらのホログラムは常に世界または互いに相対的に時間の経過と共に変化します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-251">In a world-scale experience, if you placed all your holograms in a single rigid coordinate system, those holograms would necessarily drift over time, either relative to the world or to each other.</span></span>

<span data-ttu-id="dc6b5-252">たとえば、ヘッドセットは、現在、世界中の2つの場所が4メートル離れていると考えられます。その後、その位置が実際には3.9 メートル離れていることを理解してください。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-252">For example, the headset may currently believe two locations in the world to be 4 meters apart, and then later refine that understanding, learning that the locations are in fact 3.9 meters apart.</span></span> <span data-ttu-id="dc6b5-253">1つの固定された座標系に最初に4メートルが配置されていた場合、そのうちの1つは、常に実際の世界から0.1 のメーターをオフにします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-253">If those holograms had initially been placed 4 meters apart in a single rigid coordinate system, one of them would then always appear 0.1 meters off from the real world.</span></span>

### <a name="spatial-anchors"></a><span data-ttu-id="dc6b5-254">空間アンカー</span><span class="sxs-lookup"><span data-stu-id="dc6b5-254">Spatial anchors</span></span>

<span data-ttu-id="dc6b5-255">Windows Mixed Reality は、前のセクションで説明した問題を解決します。これにより、ユーザーがホログラムを配置した世界の重要なポイントをマークする[空間アンカー](spatial-anchors.md)を作成できるようになります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-255">Windows Mixed Reality solves the issue described in the previous section by letting you create [spatial anchors](spatial-anchors.md) to mark important points in the world where the user has placed holograms.</span></span> <span data-ttu-id="dc6b5-256">空間アンカーは、システムが長期的に追跡する必要がある、ワールド内の重要な点を表します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-256">A spatial anchor represents an important point in the world that the system should keep track of over time.</span></span>

<span data-ttu-id="dc6b5-257">デバイスが世界について学習するときに、これらの空間アンカーは、各アンカーが実際の世界に対して相対的に配置されている場所を正確に維持するために、必要に応じて相対的な位置を調整できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-257">As the device learns about the world, these spatial anchors can adjust their position relative to one another as needed to ensure that each anchor stays precisely where it was placed relative to the real-world.</span></span> <span data-ttu-id="dc6b5-258">ユーザーがホログラムを配置した場所に空間アンカーを配置した後、空間アンカーを基準としてそのホログラムを配置することで、ユーザーが数十単位でローミングする場合でも、ホログラムが最適な安定性を維持できるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-258">By placing a spatial anchor at the location where the user places a hologram and then positioning that hologram relative to its spatial anchor, you can ensure that the hologram maintains optimal stability, even as the user roams across tens of meters.</span></span>

<span data-ttu-id="dc6b5-259">空間アンカーを相互に相対的に調整するこのような継続的な調整は、空間アンカーと、参照の静止フレームからの座標系の主な違いです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-259">This continuous adjustment of spatial anchors relative to one another is the key difference between coordinate systems from spatial anchors and stationary frames of reference:</span></span>

* <span data-ttu-id="dc6b5-260">すべての静止フレームに配置されたホログラムは、互いに剛体リレーションシップを保持します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-260">Holograms placed in the stationary frame of reference all retain a rigid relationship to one another.</span></span> <span data-ttu-id="dc6b5-261">ただし、ユーザーの距離が長いと、ユーザーの横にあるホログラムが安定していることを確認するために、そのフレームの座標系が世界に対して相対的にずれている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-261">However, as the user walks long distances, that frame's coordinate system may drift relative to the world to ensure that holograms next to the user appear stable.</span></span>

* <span data-ttu-id="dc6b5-262">ステージ内に配置されたホログラムは、相互に剛体リレーションシップも保持します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-262">Holograms placed in the stage frame of reference also retain a rigid relationship to one another.</span></span> <span data-ttu-id="dc6b5-263">静止フレームとは対照的に、ステージフレームは、定義された物理的な原点を基準として常に固定されたままです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-263">In contrast to the stationary frame, the stage frame always remains fixed in place relative to its defined physical origin.</span></span> <span data-ttu-id="dc6b5-264">ただし、ステージの座標系に5メートルの境界を超えるコンテンツがレンダリングされるのは、ユーザーがその境界内にある間のみ安定していることです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-264">However, content rendered in the stage's coordinate system beyond its 5-meter boundary will only appear stable while the user is standing within that boundary.</span></span>

* <span data-ttu-id="dc6b5-265">1つの空間アンカーを使用して配置されたホログラムは、別の空間アンカーを使用して配置されたホログラムに相対的にずれます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-265">Holograms placed using one spatial anchor may drift relative to holograms placed using another spatial anchor.</span></span> <span data-ttu-id="dc6b5-266">これにより、Windows は各空間アンカーの位置を理解しやすくなります。たとえば、1つのアンカーを左に調整する必要があり、別のアンカーが右に調整する必要がある場合でも同様です。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-266">This allows Windows to improve its understanding of the position of each spatial anchor, even if, for example, one anchor needs to adjust itself left and another anchor needs to adjust right.</span></span>

<span data-ttu-id="dc6b5-267">ユーザーの近くの安定性を確保するために常に最適化されている、静止した参照フレームとは対照的に、参照のステージフレームと空間アンカーは、オリジンの近くに安定性を確保します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-267">In contrast to a stationary frame of reference, which always optimizes for stability near the user, the stage frame of reference and spatial anchors ensure stability near their origins.</span></span> <span data-ttu-id="dc6b5-268">このようにすると、これらのホログラムは時間の経過と共に正確に配置されますが、座標系の原点から離れすぎているホログラムによって、より重大なレバー arm 効果が発生することもあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-268">This helps those holograms stay precisely in place over time, but it also means that holograms rendered too far away from their coordinate system's origin will experience increasingly severe lever-arm effects.</span></span> <span data-ttu-id="dc6b5-269">これは、ステージまたはアンカーの位置と向きに対する小さな調整が、そのアンカーからの距離に比例して拡大されるためです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-269">This is because small adjustments to the position and orientation of the stage or anchor are magnified proportional to the distance from that anchor.</span></span> 

<span data-ttu-id="dc6b5-270">経験則として、遠くの空間アンカーの座標系に基づいてレンダリングしたものが、原点の約3メートル以内であることを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-270">A good rule of thumb is to ensure that anything you render based on a distant spatial anchor's coordinate system is within about 3 meters of its origin.</span></span> <span data-ttu-id="dc6b5-271">位置指定エラーが増加しても、ユーザーのビューではあまり変化しない小さなホログラムにのみ影響するため、近くのステージオリジンの場合は、遠くのコンテンツをレンダリングすることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-271">For a nearby stage origin, rendering distant content is OK, as any increased positional error will affect only small holograms that will not shift much in the user's view.</span></span>

### <a name="spatial-anchor-persistence"></a><span data-ttu-id="dc6b5-272">空間アンカーの永続性</span><span class="sxs-lookup"><span data-stu-id="dc6b5-272">Spatial anchor persistence</span></span>

<span data-ttu-id="dc6b5-273">空間アンカーでは、アプリが中断した後やデバイスがシャットダウンされた後でも、アプリが重要な場所を記憶できるようにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-273">Spatial anchors can also allow your app to remember an important location even after your app suspends or the device is shut down.</span></span>

<span data-ttu-id="dc6b5-274">アプリによって作成された空間アンカーをディスクに保存し、後で再度読み込んで、アプリの**空間アンカーストア**に保持することができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-274">You can save to disk the spatial anchors your app creates, and then load them back again later, by persisting them to your app's **spatial anchor store**.</span></span> <span data-ttu-id="dc6b5-275">アンカーを保存または読み込むときは、後でアンカーを識別するために、アプリに意味のある文字列キーを指定します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-275">When saving or loading an anchor, you provide a string key that is meaningful to your app, in order to identify the anchor later.</span></span> <span data-ttu-id="dc6b5-276">このキーはアンカーのファイル名と考えることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-276">Think of this key as the filename for your anchor.</span></span> <span data-ttu-id="dc6b5-277">ユーザーがその場所に配置した3D モデルなど、他のデータをそのアンカーと関連付けるには、そのデータをアプリのローカルストレージに保存し、選択したキーに関連付けます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-277">If you want to associate other data with that anchor, such as a 3D model that the user placed at that location, save that to your app's local storage and associate it with the key you chose.</span></span>

<span data-ttu-id="dc6b5-278">ストアにアンカーを保持することで、ユーザーは個々のホログラムを配置したり、アプリがさまざまなホログラムを配置するワークスペースを配置したりできます。また、アプリの多くの使用において、これらのホログラムを予想される場所で探すことができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-278">By persisting anchors to the store, your users can place individual holograms or place a workspace around which an app will place its various holograms, and then find those holograms later where they expect them, over many uses of your app.</span></span>

<span data-ttu-id="dc6b5-279"><a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間アンカー</a>を使用して HoloLens、iOS および Android デバイスの間で非同期ホログラム永続化を行うこともできます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-279">You can also use <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a> for asynchronous hologram persistence across HoloLens, iOS and Android devices.</span></span>  <span data-ttu-id="dc6b5-280">永続的なクラウド空間アンカーを共有すると、永続化した同じホログラムを長時間にわたって複数のデバイスに表示できます。これらのデバイスが同じ時間と場所に居合わせていなくても問題ありません。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-280">By sharing a durable cloud spatial anchor, multiple devices can observe the same persisted hologram over time, even if those devices are not present together at the same time.</span></span>

### <a name="spatial-anchor-sharing"></a><span data-ttu-id="dc6b5-281">空間アンカーの共有</span><span class="sxs-lookup"><span data-stu-id="dc6b5-281">Spatial anchor sharing</span></span>

<span data-ttu-id="dc6b5-282">アプリでは、空間アンカーを他のデバイスとリアルタイムで共有することもできます。これにより、リアルタイムの共有エクスペリエンスが可能になります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-282">Your app can also share a spatial anchor in real-time with other devices, allowing for real-time shared experiences.</span></span>

<span data-ttu-id="dc6b5-283"><a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空間アンカー</a>を使用すると、アプリは複数の HoloLens、iOS、および Android デバイス間で空間アンカーを共有できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-283">By using <a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure Spatial Anchors</a>, your app can share a spatial anchor across multiple HoloLens, iOS and Android devices.</span></span> <span data-ttu-id="dc6b5-284">各デバイスで同じ空間アンカーを使用してホログラムをレンダリングすると、現実世界の同じ場所ですべてのユーザーがホログラムを見ることができます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-284">By having each device render a hologram using the same spatial anchor, all users will see the hologram appear at the same place in the real world.</span></span>

## <a name="avoid-head-locked-content"></a><span data-ttu-id="dc6b5-285">ヘッドロックされたコンテンツを避ける</span><span class="sxs-lookup"><span data-stu-id="dc6b5-285">Avoid head-locked content</span></span>

<span data-ttu-id="dc6b5-286">ヘッドロックされたコンテンツをレンダリングすることを強くお勧めします。これは、ディスプレイの固定位置 (HUD など) にとどまります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-286">We strongly discourage rendering head-locked content, which stays at a fixed spot in the display (such as a HUD).</span></span> <span data-ttu-id="dc6b5-287">一般に、ヘッドロックされたコンテンツはユーザーにとって不快であり、世界の自然な部分には見えません。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-287">In general, head-locked content is uncomfortable for users and does not feel like a natural part of their world.</span></span>

<span data-ttu-id="dc6b5-288">ヘッドロックされたコンテンツは、通常、ユーザーにアタッチされているか、世界中に配置されているホログラムに置き換える必要があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-288">Head-locked content should usually be replaced with holograms that are attached to the user or placed in the world itself.</span></span> <span data-ttu-id="dc6b5-289">たとえば、[カーソル](cursors.md)は一般に世界にプッシュされる必要があり、ユーザーの見つめにあるオブジェクトの位置と距離を反映するように自然にスケーリングします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-289">For example, [cursors](cursors.md) should generally be pushed out into the world, scaling naturally to reflect the position and distance of the object under the user's gaze.</span></span>

## <a name="handling-tracking-errors"></a><span data-ttu-id="dc6b5-290">追跡エラーの処理</span><span class="sxs-lookup"><span data-stu-id="dc6b5-290">Handling tracking errors</span></span>

<span data-ttu-id="dc6b5-291">ダーク廊下などの一部の環境では、内部でのアウトトラッキングを使用して、ヘッドセットが自身を正しく見つけることができない場合があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-291">In some environments such as dark hallways, it may not be possible for a headset using inside-out tracking to locate itself correctly in the world.</span></span> <span data-ttu-id="dc6b5-292">これにより、正しく処理されなかった場合に、ホログラムが表示されないか、正しくない場所に表示される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-292">This can lead holograms to either not show up or appear at incorrect places if handled incorrectly.</span></span> <span data-ttu-id="dc6b5-293">ここでは、これが発生する可能性のある条件、ユーザーエクスペリエンスへの影響、およびこの状況に最適に対処するためのヒントについて説明します。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-293">We now discuss the conditions in which this can happen, its impact on user experience, and tips to best handle this situation.</span></span>

### <a name="headset-cannot-track-due-to-insufficient-sensor-data"></a><span data-ttu-id="dc6b5-294">センサーデータが不足しているため、ヘッドセットが追跡できません</span><span class="sxs-lookup"><span data-stu-id="dc6b5-294">Headset cannot track due to insufficient sensor data</span></span>

<span data-ttu-id="dc6b5-295">ヘッドセットのセンサーがヘッドセットの場所を特定できないことがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-295">Sometimes, the headset's sensors are not able to figure out where the headset is.</span></span> <span data-ttu-id="dc6b5-296">これは、部屋が暗い場合や、センサーがヘアまたはハンドで覆われている場合、または周囲のテクスチャが十分でない場合に発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-296">This can happen if the room is dark, or if the sensors are covered by hair or hands, or if the surroundings do not have enough texture.</span></span>

<span data-ttu-id="dc6b5-297">この場合、ヘッドセットは、世界中にロックされているホログラムをレンダリングするために十分な精度で位置を追跡することができません。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-297">When this happens, the headset will be unable to track its position with enough accuracy to render world-locked holograms.</span></span> <span data-ttu-id="dc6b5-298">空間アンカー、静止フレーム、ステージフレームがデバイスに対して相対的な位置を調べることはできませんが、関連付けられている参照フレームで、本文ロックされたコンテンツをレンダリングすることはできます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-298">You won't be able to figure out where a spatial anchor, stationary frame or stage frame is relative to the device, but you can still render body-locked content in the attached frame of reference.</span></span>

<span data-ttu-id="dc6b5-299">アプリでは、位置追跡を取得する方法をユーザーに伝える必要があります。これにより、センサーを明らかにしたり、より多くのライトをオンにしたりするなど、いくつかのヒントを説明するフォールバックボディロックコンテンツを表示できます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-299">Your app should tell the user how to get positional tracking back, rendering some fallback body-locked content that describes some tips, such as uncovering the sensors and turning on more lights.</span></span>

### <a name="headset-tracks-incorrectly-due-to-dynamic-changes-in-the-environment"></a><span data-ttu-id="dc6b5-300">環境の動的な変更により、ヘッドセットの追跡が正しく行われない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-300">Headset tracks incorrectly due to dynamic changes in the environment</span></span>

<span data-ttu-id="dc6b5-301">場合によっては、多くの開発者が部屋にいるなど、環境に動的な変更が多数あると、デバイスが適切に追跡できないことがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-301">Sometimes, the device cannot track properly if there are lots of dynamic changes in the environment, such as many people walking around in the room.</span></span> <span data-ttu-id="dc6b5-302">この場合、デバイスがこの動的な環境で自身を追跡しようとしたときに、ホログラムがジャンプまたはドリフトするように見えることがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-302">In this case, the holograms may seem to jump or drift as the device tries to track itself in this dynamic environment.</span></span> <span data-ttu-id="dc6b5-303">このシナリオに達した場合は、比較的動的な環境でデバイスを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-303">We recommend using the device in a less dynamic environment if you hit this scenario.</span></span>

### <a name="headset-tracks-incorrectly-because-the-environment-has-changed-significantly-over-time"></a><span data-ttu-id="dc6b5-304">環境が時間の経過と共に大幅に変更されたため、ヘッドセットの追跡が正しく行われない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-304">Headset tracks incorrectly because the environment has changed significantly over time</span></span>

<span data-ttu-id="dc6b5-305">場合によっては、多くの変更が行われた環境 (たとえば、家具、壁 hangings など) でヘッドセットの使用を開始すると、一部のホログラムが元の場所から移動する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-305">Sometimes, when you start using a headset in an environment which has undergone lot of changes (e.g. significant movement of furniture, wall hangings etc.), it is possible that some holograms may appear shifted from their original locations.</span></span> <span data-ttu-id="dc6b5-306">この新しい領域でユーザーが移動すると、前のホログラムも移動することがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-306">The earlier holograms may also jump around as the user moves around in this new space.</span></span> <span data-ttu-id="dc6b5-307">これは、システムによって使用されている領域についての理解が失われ、ルームの機能を調整しようとしている間に環境の再マップが試行されるためです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-307">This is because the system's understanding of your space no longer holds and it tries to remap the environment while trying to reconcile the features of the room.</span></span> <span data-ttu-id="dc6b5-308">このシナリオでは、意図した場所に表示されない場合に、ユーザーに対してピン留めしたホログラムを再配置することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-308">In this scenario, it is advised to encourage users to re-place holograms they pinned in the world if they are not appearing where expected.</span></span>

### <a name="headset-tracks-incorrectly-due-to-identical-spaces-in-an-environment"></a><span data-ttu-id="dc6b5-309">環境内の同じスペースが原因でヘッドセットの追跡が正しく行われない</span><span class="sxs-lookup"><span data-stu-id="dc6b5-309">Headset tracks incorrectly due to identical spaces in an environment</span></span>

<span data-ttu-id="dc6b5-310">場合によっては、自宅またはその他の領域に2つの同一領域が存在することがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-310">Sometimes, a home or other space may have two identical areas.</span></span> <span data-ttu-id="dc6b5-311">たとえば、2つの同一の会議室、2つの同じコーナー領域、デバイスのビューのフィールドに対応する2つの大きな同じポスターです。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-311">For example, two identical conference rooms, two identical corner areas, two large identical posters that cover the device's field of view.</span></span> <span data-ttu-id="dc6b5-312">このようなシナリオでは、デバイスが同一の部分を混同し、内部表現で同じようにマークすることがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-312">In such scenarios, the device may, at times, get confused between the identical parts and mark them as the same in its internal representation.</span></span> <span data-ttu-id="dc6b5-313">これにより、一部の領域からのホログラムが他の場所に表示される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-313">This may cause the holograms from some areas to appear in other locations.</span></span> <span data-ttu-id="dc6b5-314">環境の内部表現が破損しているため、デバイスの追跡が頻繁に失われることがあります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-314">The device may start to lose tracking often since its internal representation of the environment has been corrupted.</span></span> <span data-ttu-id="dc6b5-315">この場合は、システムの環境の理解をリセットすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-315">In this case, it is advised to reset the system's environmental understanding.</span></span> <span data-ttu-id="dc6b5-316">マップをリセットすると、すべての空間アンカーの配置が失われることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-316">Please note that resetting the map leads to loss of all spatial anchor placements.</span></span> <span data-ttu-id="dc6b5-317">これにより、ヘッドセットは環境の一意の領域で適切に追跡されます。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-317">This will cause the headset to track well in the unique areas of the environment.</span></span> <span data-ttu-id="dc6b5-318">ただし、同一の領域間でデバイスが混同されると、問題が再度発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dc6b5-318">However, the problem may re-occur if the device gets confused between the identical areas again.</span></span>

## <a name="see-also"></a><span data-ttu-id="dc6b5-319">関連項目</span><span class="sxs-lookup"><span data-stu-id="dc6b5-319">See also</span></span>
* [<span data-ttu-id="dc6b5-320">空間座標系と holographic のレンダリングに関する GDC 2017 プレゼンテーション</span><span class="sxs-lookup"><span data-stu-id="dc6b5-320">GDC 2017 presentation on spatial coordinate systems and holographic rendering</span></span>](https://channel9.msdn.com/events/GDC/GDC-2017/GDC2017-008)
* [<span data-ttu-id="dc6b5-321">Unity の座標系</span><span class="sxs-lookup"><span data-stu-id="dc6b5-321">Coordinate systems in Unity</span></span>](coordinate-systems-in-unity.md)
* [<span data-ttu-id="dc6b5-322">DirectX の座標系</span><span class="sxs-lookup"><span data-stu-id="dc6b5-322">Coordinate systems in DirectX</span></span>](coordinate-systems-in-directx.md)
* [<span data-ttu-id="dc6b5-323">空間アンカー</span><span class="sxs-lookup"><span data-stu-id="dc6b5-323">Spatial anchors</span></span>](spatial-anchors.md)
* [<span data-ttu-id="dc6b5-324">複合現実での共有エクスペリエンス</span><span class="sxs-lookup"><span data-stu-id="dc6b5-324">Shared experiences in mixed reality</span></span>](shared-experiences-in-mixed-reality.md)
* <span data-ttu-id="dc6b5-325"><a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span><span class="sxs-lookup"><span data-stu-id="dc6b5-325"><a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span></span>
* [<span data-ttu-id="dc6b5-326">ケース スタディ - Mixed Reality で穴から覗く</span><span class="sxs-lookup"><span data-stu-id="dc6b5-326">Case study - Looking through holes in your reality</span></span>](case-study-looking-through-holes-in-your-reality.md)
