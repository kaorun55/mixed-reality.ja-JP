---
title: シーンの理解
description: HoloLens のシーンと機能の概要
author: szymons
ms.author: szymons
ms.date: 07/08/2019
ms.topic: article
keywords: シーンの理解、空間マッピング、Windows Mixed Reality、Unity
ms.openlocfilehash: bacec5e6a9bfda49d4ad6d3dd849156c9cc09add
ms.sourcegitcommit: 83698638b93c5ba77b3ffc399f1706482539f27b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/26/2019
ms.locfileid: "74539703"
---
# <a name="scene-understanding"></a>シーンの理解

シーンについて理解することで、さまざまな環境に対応したアプリケーションの開発を直感的に行うことができるように設計された、構造化された高レベルの環境表現を利用できます。 シーンを理解することは、これを実現するために、非常に精度の低い構造化された[空間マッピング](spatial-mapping.md)や新しい AI 駆動型ランタイムなど、既存の mixed reality ランタイムの力を組み合わせることによって実現します。 これらのテクノロジを組み合わせることで、シーンの理解によって、Unity や ARKit/Arkit などのフレームワークで使用されているような3D 環境の表現が生成されます。 シーンを理解すると、エントリポイントはシーンオブザーバーで始まります。このオブザーバーは、新しいシーンを計算するためにアプリケーションによって呼び出されます。 現在、このテクノロジでは、3つの独立した関連オブジェクトカテゴリが生成されています。これは、単純化された watertight 環境メッシュで、煩雑なことなく平面の部屋構造を推測し、四角形を呼び出す位置に平面領域を作成し、スナップショット[を作成します。](spatial-mapping.md)サーフェイスに配置される四角形/Watertight データと一致する空間マッピングメッシュ。

![空間マッピングメッシュ, ラベル付き平面サーフェス, watertight メッシュ](images/SUScenarios.png)

このドキュメントでは、シナリオの概要を説明し、シーンの理解と空間マッピングの共有の関係を明確にすることを目的としています。

## <a name="developing-with-scene-understanding"></a>シーンの理解による開発

この記事では、シーンの実行時と概念について説明します。 シーンを理解して開発する方法に関するドキュメントをお探しの場合は、次のことをお勧めします。

[シーンについて SDK の概要](scene-understanding-SDK.md)

サンプルの GitHub サイトから、シーンについてのサンプルアプリをダウンロードできます。

[シーンの理解のサンプル](https://github.com/sceneunderstanding-microsoft/unitysample)

デバイスがなく、サンプルシーンにアクセスしてシーンの理解を試す必要がある場合は、サンプルアセットフォルダーにシーンがあります。

[シーンについてのサンプルシーン](https://github.com/sceneunderstanding-microsoft/unitysample/tree/master/Assets/Resources/SerializedScenesForPCPath)

### <a name="sdk"></a>SDK

シーン Understandiing 向けの開発方法の詳細については、「シーンについて」を参照してください。このドキュメントでは、「[シーンについ](scene-understanding-SDK.md)て」を参照してください。


### <a name="sample"></a>サンプル


## <a name="device-support"></a>デバイスのサポート

<table>
    <colgroup>
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    </colgroup>
    <tr>
        <td><strong>機能</strong></td>
        <td><a href="hololens-hardware-details.md"><strong>HoloLens (第 1 世代)</strong></a></td>
        <td><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></td>
        <td><a href="immersive-headset-hardware-details.md"><strong>イマーシブ ヘッドセット</strong></a></td>
    </tr>
     <tr>
        <td>シーンの理解</td>
        <td>❌</td>
        <td>✔️</td>
        <td>❌</td>
    </tr>
</table>

## <a name="common-usage-scenarios"></a>一般的な利用シナリオ

一般的な空間マッピングの使用シナリオの ![図: 配置、遮蔽、物理、ナビゲーション](images/sm-concepts-1000px.png)<br>
*一般的な空間マッピングの使用シナリオ: 配置、遮蔽、物理、およびナビゲーション。*

<br>

環境に対応するアプリケーション (配置、閉鎖、物理など) の主要なシナリオの多くは、空間マッピングとシーンの理解の両方でアドレス指定できます。このセクションでは、これらの違いについて説明します。 シーンの理解と空間マッピングの主な違いは、構造と簡潔さの最大の精度と待機時間のトレードオフです。 アプリケーションが可能な限り最短の待機時間を必要とし、メッシュトライアングルを必要とする場合は、空間マッピングに直接アクセスします。ただし、高いレベルの処理を実行している場合は、シーン認識モデルに切り替えることを検討してください。では、機能のスーパーセットを提供する必要があります。 また、シーンの理解によって空間マッピングメッシュが表現の一部として提供されるため、可能な限り完全かつ正確な空間マッピングデータに常にアクセスできることに注意してください。

 次のセクションでは、新しいシーンの概要 SDK のコンテキストにおける主要な空間マッピングのシナリオについて説明します。

### <a name="placement"></a>配置

シーンの理解は、配置シナリオを簡略化するために特別に設計された新しい構造を提供します。 シーンでは、ホログラムを配置できるフラットサーフェスを記述する SceneQuads と呼ばれるプリミティブを計算できます。 SceneQuads は、特に配置を中心に設計されており、2D サーフェイスを記述し、そのサーフェイス上に配置するための API を提供しています。 以前は、トライアングルメッシュを使用して配置を実行する場合、オブジェクトの配置の適切な場所を識別するために、クワッドのすべての領域をスキャンし、穴の塗りつぶし/後処理を実行する必要がありました。 これは、四角形では常に必要となるわけではありません。これは、実行時には、スキャンされなかったクワッドの領域を推定することができ、サーフェイスの一部ではない四角形の領域を無効にすることができるためです。

:::row:::
    :::column:::
       推定が無効になっている ![SceneQuads。スキャンされたリージョンの配置領域をキャプチャします。](images/SUQuads.png)<br>
       **イメージ #1** -推定を無効にし、スキャンされたリージョンの配置領域をキャプチャします。
    :::column-end:::
        :::column:::
       推論が有効になっている ![の四角形は、スキャンされた領域に制限されなくなりました。](images/SUWatertight.png)<br>
        **イメージ #2** -推論が有効になっている四角形、配置はスキャンされた領域に限定されなくなりました。
    :::column-end:::
:::row-end:::

<br>


アプリケーションで、環境の固定構造に2D または3D のホログラムを配置する場合は、[空間マッピング](spatial-mapping.md)メッシュからこの情報を計算することをお勧めします。これにより、配置のための SceneQuads の簡略化と利便性が向上します。 このトピックの詳細については、「[シーンについての SDK リファレンス](scene-understanding-SDK.md)」を参照してください。

**メモ**空間マッピングメッシュに依存するレガシ配置コードの場合、EnableWorldMesh 設定を設定することによって、空間マッピングメッシュを SceneQuads と共に計算できます。 シーンを理解する API がアプリケーションの待機時間の要件を満たしていない場合は、引き続き[空間マッピング api](spatial-mapping.md#placement)を使用することをお勧めします。

### <a name="occlusion"></a>オクルージョン

[空間マッピングオクルージョン](spatial-mapping.md#occlusion)は、環境のリアルタイム状態をキャプチャするための最も低い方法にとどまります。 これは、高度に動的なシーンで遮蔽を提供するのに便利な場合がありますが、いくつかの理由から、遮蔽のシーンの理解を考慮することをお勧めします。 シーンの理解によって生成される空間マッピングメッシュを使用する場合は、ローカルキャッシュに格納されないため、認識 Api からは使用できない空間マッピングからデータを要求できます。 Watertight メッシュと共に遮蔽に空間マッピングを使用すると、追加の値が提供されます。特に、スキャンされていない部屋の構造が完了します。

シーンの理解の待機時間の増加に合わせて要件が許容できる場合、アプリケーション開発者は、シーンについて理解する watertight メッシュを使用することを検討する必要があります。また、空間マッピングメッシュは平面表現と連携していると考えられます。 これにより、最も現実的なオクルージョンマップを提供できる、より細かい nonplanar geometry を使用して、watertight オクルー・・・・・・・・・・・・・・・・・・・・・・・の

### <a name="physics"></a>物理

シーンの理解では、空間マッピングのメッシュによって適用される物理的な多くの制限に対処するためのセマンティクスを使用して領域を分解する watertight メッシュが生成されます。 Watertight 構造体は、物理的な光のキャストを常にヒットさせると共に、セマンティック分解によって、室内ナビゲーションのナビゲーションメッシュをより簡単に生成できます。 EnableSceneObjectMeshes を使用したシーンの作成と EnableWorldMesh に関するセクションで説明した[ように、](#occlusion)最も物理的に完全なメッシュが可能になります。 環境メッシュの watertight プロパティを使用すると、ヒットテストがサーフェイスのヒットに失敗するのを防ぐことができます。また、メッシュデータは、領域構造だけでなく、シーン内のすべてのオブジェクトと対話することを保証します。

### <a name="navigation"></a>ナビゲーション

セマンティッククラスによって分解された平面メッシュは、ナビゲーションとパスの計画に最適な構成要素であり、「[空間マッピングのナビゲーション](spatial-mapping.md#navigation)の概要」で説明されている多くの問題を緩和します。 シーンで計算された SceneMesh オブジェクトは、既に表面の種類によって構成解除されており、ナビゲーションメッシュの生成が、ウォーク可能なサーフェイスに限定されます。 フロア構造は単純であるため、Unity などの3d エンジンでの動的ナビゲーションメッシュ生成は、リアルタイムの要件に応じて達成できます。

現在でも正確なナビゲーションメッシュを生成するには後処理が必要です。つまり、アプリケーションでは、移動が乱雑またはテーブルを通過しないように、フロアに occluders を投影する必要があります。これを実現する最も正確な方法は、EnableWorldMesh フラグを使用してシーンが計算された場合に提供される世界のメッシュデータを射影することです。

### <a name="visualization"></a>可視化

[空間マッピングの視覚化](spatial-mapping.md#visualization)を使用して、環境のリアルタイムのフィードバックを行うことができますが、平面オブジェクトと watertight オブジェクトの単純化によってパフォーマンスや視覚品質が向上する多くのシナリオがあります。 四角形または平面 watertight メッシュによって提供される平面サーフェスに射影した場合、空間マッピングを使用して記述されているシャドウプロジェクションとアース手法は、より見栄えが良い場合があります。 これは、シーンが推測されることが原因で完全な事前スキャンが最適ではない環境やシナリオでは特に当てはまり、完全な環境と平面の前提条件によって成果物が最小化されます。

さらに、空間マッピングによって返されるサーフェスの合計数は、内部空間キャッシュによって制限されます。一方、シーン認識のバージョンの空間マッピングメッシュは、キャッシュされていない空間マッピングデータにアクセスできます。 このため、シーンを理解することは、視覚エフェクトやさらにメッシュ処理を行うために、より大きなスペース (たとえば、1つの部屋を超える) のメッシュ表現をキャプチャする場合に適しています。 EnableWorldMesh で返されるワールドメッシュの詳細レベルは、全体にわたって一貫しています。これにより、ワイヤーフレームとしてレンダリングした場合により良い視覚化が得られる可能性があります。

### <a name="see-also"></a>参照

* [シーンを理解する SDK](scene-understanding-SDK.md)
* [空間マッピング](spatial-mapping.md)
